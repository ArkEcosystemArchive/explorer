{"version":3,"sources":["webpack:///./src/pages/Delegates.vue?8c2e","webpack:///./src/pages/Delegates.vue?8792","webpack:///./src/pages/Delegates.vue?1145","webpack:///./src/pages/Delegates.vue"],"names":["render","_vm","this","_h","$createElement","_c","_self","staticClass","_v","_s","$t","attrs","delegates","sortParams","resignedOnly","on","onSortChange","meta","currentPage","onPageChange","_e","staticRenderFns","registerHooks","changePage","to","from","next","name","allResigned","Number","params","page","all","data","vm","setDelegates","setMeta","$route","$router","push","pageCount","$store","getters","dispatch","field","type","component"],"mappings":"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","file":"js/delegates.9f2fe4da.js","sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"max-w-2xl mx-auto md:pt-5\"},[_c('ContentHeader',[_vm._v(_vm._s(_vm.$t(\"PAGES.DELEGATES.TITLE\")))]),_c('section',{staticClass:\"page-section py-5 md:py-10\"},[_c('div',{staticClass:\"hidden sm:block\"},[_c('TableDelegatesDesktop',{attrs:{\"delegates\":_vm.delegates,\"sort-query\":_vm.sortParams[_vm.resignedOnly ? 'tableResigned' : 'table'],\"hide-ranks\":_vm.resignedOnly},on:{\"on-sort-change\":_vm.onSortChange}})],1),_c('div',{staticClass:\"sm:hidden\"},[_c('TableDelegatesMobile',{attrs:{\"delegates\":_vm.delegates}})],1),(_vm.showPagination)?_c('Pagination',{attrs:{\"meta\":_vm.meta,\"current-page\":_vm.currentPage},on:{\"page-change\":_vm.onPageChange}}):_vm._e()],1)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nimport { Component, Vue, Watch } from \"vue-property-decorator\";\nimport { mapGetters } from \"vuex\";\nimport { Route } from \"vue-router\";\nimport { ISortParameters, IDelegate } from \"@/interfaces\";\nimport DelegateService from \"@/services/delegate\";\n\nComponent.registerHooks([\"beforeRouteEnter\", \"beforeRouteUpdate\"]);\n\n@Component\nexport default class Delegates extends Vue {\n  get showPagination() {\n    return this.meta && this.meta.pageCount > 1;\n  }\n\n  get sortParams() {\n    return this.$store.getters[\"ui/delegateSortParams\"];\n  }\n\n  set sortParams(params: ISortParameters) {\n    this.$store.dispatch(\"ui/setDelegateSortParams\", {\n      ...this.sortParams,\n      [this.resignedOnly ? \"tableResigned\" : \"table\"]: {\n        field: params.field,\n        type: params.type,\n      },\n    });\n  }\n  private delegates: IDelegate[] | null = null;\n  private meta: any | null = null;\n  private currentPage = 0;\n  private resignedOnly = false;\n\n  @Watch(\"currentPage\")\n  public onCurrentPageChanged() {\n    this.changePage();\n  }\n\n  public async beforeRouteEnter(to: Route, from: Route, next: (vm?: any) => void) {\n    try {\n      const { meta, data } =\n        to.name === \"delegates-resigned\"\n          ? await DelegateService.allResigned(Number(to.params.page))\n          : await DelegateService.all(Number(to.params.page));\n\n      next((vm: Delegates) => {\n        vm.resignedOnly = to.name === \"delegates-resigned\";\n        vm.currentPage = Number(to.params.page);\n        vm.setDelegates(data);\n        vm.setMeta(meta);\n      });\n    } catch (e) {\n      next({ name: \"404\" });\n    }\n  }\n\n  public async beforeRouteUpdate(to: Route, from: Route, next: (vm?: any) => void) {\n    this.delegates = null;\n    this.meta = null;\n\n    try {\n      const { meta, data } =\n        to.name === \"delegates-resigned\"\n          ? await DelegateService.allResigned(Number(to.params.page))\n          : await DelegateService.all(Number(to.params.page));\n\n      this.resignedOnly = to.name === \"delegates-resigned\";\n      this.currentPage = Number(to.params.page);\n      this.setDelegates(data);\n      this.setMeta(meta);\n      next();\n    } catch (e) {\n      next({ name: \"404\" });\n    }\n  }\n\n  public setMeta(meta: any) {\n    this.meta = meta;\n  }\n\n  public onPageChange(page: number) {\n    this.currentPage = page;\n  }\n\n  public changePage() {\n    if (this.currentPage !== Number(this.$route.params.page)) {\n      // @ts-ignore\n      this.$router.push({\n        name: this.resignedOnly ? \"delegates-resigned\" : \"delegates\",\n        params: {\n          page: this.currentPage,\n        },\n      });\n    }\n  }\n\n  private setDelegates(delegates: IDelegate[]) {\n    this.delegates = delegates;\n  }\n\n  private onSortChange(params: ISortParameters) {\n    this.sortParams = params;\n  }\n}\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/ts-loader/index.js??ref--13-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Delegates.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/ts-loader/index.js??ref--13-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Delegates.vue?vue&type=script&lang=ts&\"","import { render, staticRenderFns } from \"./Delegates.vue?vue&type=template&id=149bc7e2&\"\nimport script from \"./Delegates.vue?vue&type=script&lang=ts&\"\nexport * from \"./Delegates.vue?vue&type=script&lang=ts&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports"],"sourceRoot":""}